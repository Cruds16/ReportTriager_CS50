{% extends "dashboard_layout.html" %}

{% block title %}
    Task List
{% endblock %}

{% block main %}
  <div class="container-fluid p-0 scrollable tasklist">
    <div class="row w-100 m-0">

      <h1>TASK LIST</h1>

      <!-- Personal ongoing tasks section -->
      <div class="tasklist_box">
        <h2>Your ongoing tasks</h2>
        <table class="table table-hover table-responsive">
          <thead class="table-dark">
            <th>Task ID</th>
            <th>Task name</th>
            <th>Report ID</th>
            <th>Due Date</th>
            <th>Person responsible</th>
            <th>Comments</th>
            <th></th>
            <th></th>
          </thead>
          <tbody>
          {% for task in your_tasks %} 
          <tr>
            <td>{{ task.id }}</td>
            <td>{{ task.task_name }}</td>
            <td>{{ task.report.id }}</td>
            <td>{{ task.due_date }}</td>
            <td>{{ task.taskowner.username }}</td>
            <td>{{ task.task_comments }}</td>
            <td>
              <form action="{{ url_for('complete_task', task_id=task.id) }}" method="get">
              <input type="submit" class="btn btn-outline-success btn-sm" value="Complete"></input>
              </form>
            </td>
            <td>
              <form action="{{ url_for('edit_task', task_id=task.id) }}" method="get">
              <input type="submit" class="btn btn-outline-secondary btn-sm" value="Edit Task"></input>
              </form>
            </td>
          </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>

      <hr>
      
      <!-- Project ongoing tasks section -->
      <div class="tasklist_box">
        <h2>All ongoing tasks</h2>
        <table class="table table-hover table-responsive">
          <thead class="table-dark">
            <th>Task ID</th>
            <th>Task name</th>
            <th>Report ID</th>
            <th>Due Date</th>
            <th>Person responsible</th>
            <th>Comments</th>
            <th></th>
            <th></th>
          </thead>
          <tbody>
          {% for task in all_ongoing_tasks %} 
          <tr>
            <td>{{ task.id }}</td>
            <td>{{ task.task_name }}</td>
            <td>{{ task.report.id }}</td>
            <td>{{ task.due_date }}</td>
            <td>{{ task.taskowner.username }}</td>
            <td>{{ task.task_comments }}</td>
            <td>
              <form action="{{ url_for('complete_task', task_id=task.id) }}" method="get">
                <input type="submit" class="btn btn-outline-success btn-sm" value="Complete"></input>
                </form>
            </td>
            <td>                
              <form action="{{ url_for('edit_task', task_id=task.id) }}" method="get">
              <input type="submit" class="btn btn-outline-secondary btn-sm" value="Edit Task"></input>
              </form>
            </td>
          </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- Project completed tasks section -->
      <div class="tasklist_box">
        <h2>All completed tasks</h2>
        <table class="table table-hover table-responsive">
          <thead class="table-dark">
            <th>Task ID</th>
            <th>Task name</th>
            <th>Report ID</th>
            <th>Due Date</th>
            <th>Person responsible</th>
            <th>Comments</th>
            <th></th>
          </thead>
          <tbody>
          {% for task in all_completed_tasks %} 
          <tr class="table-success">
            <td>{{ task.id }}</td>
            <td>{{ task.task_name }}</td>
            <td>{{ task.report.id }}</td>
            <td>{{ task.due_date }}</td>
            <td>{{ task.taskowner.username }}</td>
            <td>{{ task.task_comments }}</td>
            <td>                
              <form action="{{ url_for('edit_task', task_id=task.id) }}" method="get">
              <input type="submit" class="btn btn-outline-secondary btn-sm" value="Edit Task"></input>
              </form>
            </td>
          </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>

    </div>
  </div>
{% endblock %}